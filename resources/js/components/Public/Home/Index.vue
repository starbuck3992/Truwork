<template>
    <div class="relative bg-mycolor pt-10 pb-32 overflow-hidden">
        <section id="about-us" class="opacity-0 transition-all duration-4000">
            <div class="bg-mycolor">
                <div class="max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8">
                    <div class="text-center">
                        <p class="mt-1 text-4xl font-extrabold text-gray-900 sm:text-5xl sm:tracking-tight lg:text-6xl">
                            Stylové kuchyně na zakázku</p>
                        <p class="max-w-xl mt-5 mx-auto text-xl text-gray-500">Vyrábíme kvalitní kuchyňský nábytek z
                            masivu v tradičním i moderním vzhledu. Každý kus je ručne vyrobeným a lakovaným originálem,
                            který se stane ozdobou každého interiéru. Řemeslná zručnost, preciznost a osobní přístup je
                            zárukou nejvyšší kvality a spokojenosti zákazníka.</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="content">
            <div id="mykitchens" class="relative opacity-0 transition duration-4000">
                <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:grid-flow-col-dense lg:gap-24">
                    <div class="px-4 max-w-xl mx-auto sm:px-6 lg:py-16 lg:max-w-none lg:mx-0 lg:px-0">
                        <div>
                            <!-- <div>
                              <span class="h-12 w-12 rounded-md flex items-center justify-center bg-indigo-600">
                                <InboxIcon class="h-6 w-6 text-white" aria-hidden="true" />
                              </span>
                            </div> -->
                            <div class="mt-6">
                                <h2 class="text-3xl font-extrabold tracking-tight text-gray-900">
                                    Kuchyně na míru
                                </h2>
                                <p class="mt-4 text-lg text-gray-500">
                                    Semper curabitur ullamcorper posuere nunc sed. Ornare iaculis bibendum malesuada
                                    faucibus lacinia porttitor. Pulvinar laoreet sagittis viverra duis. In venenatis sem
                                    arcu pretium pharetra at. Lectus viverra dui tellus ornare pharetra.
                                </p>
                                <div class="mt-6">
                                    <a href="#"
                                       class="inline-flex px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700">
                                        Pokračovat na galerii
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-12 sm:mt-16 lg:mt-0">
                        <div class="pl-4 -mr-48 sm:pl-6 md:-mr-16 lg:px-0 lg:m-0 lg:relative lg:h-full">
                            <img
                                class="w-full rounded-xl shadow-2xl ring-1 ring-black ring-opacity-5 lg:absolute lg:left-0 lg:h-full lg:w-auto lg:max-w-none"
                                src="https://cdn.pixabay.com/photo/2016/04/18/08/50/kitchen-1336160_960_720.jpg"
                                alt="Inbox user interface"/>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mycabinets" class="opacity-0 transition-all duration-4000 mt-24">
                <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:grid-flow-col-dense lg:gap-24">
                    <div class="px-4 max-w-xl mx-auto sm:px-6 lg:py-32 lg:max-w-none lg:mx-0 lg:px-0 lg:col-start-2">
                        <div>
                            <!-- <div>
                              <span class="h-12 w-12 rounded-md flex items-center justify-center bg-indigo-600">
                                <SparklesIcon class="h-6 w-6 text-white" aria-hidden="true" />
                              </span>
                            </div> -->
                            <div class="mt-6">
                                <h2 class="text-3xl font-extrabold tracking-tight text-gray-900">
                                    Vestavěnné skříně
                                </h2>
                                <p class="mt-4 text-lg text-gray-500">
                                    Semper curabitur ullamcorper posuere nunc sed. Ornare iaculis bibendum malesuada
                                    faucibus lacinia porttitor. Pulvinar laoreet sagittis viverra duis. In venenatis sem
                                    arcu pretium pharetra at. Lectus viverra dui tellus ornare pharetra.
                                </p>
                                <div class="mt-6">
                                    <a href="#"
                                       class="inline-flex px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700">
                                        Pokračovat na galerii
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-12 sm:mt-16 lg:mt-0 lg:col-start-1">
                        <div class="pr-4 -ml-48 sm:pr-6 md:-ml-16 lg:px-0 lg:m-0 lg:relative lg:h-full">
                            <img
                                class="w-full rounded-xl shadow-xl ring-1 ring-black ring-opacity-5 lg:absolute lg:right-0 lg:h-full lg:w-auto lg:max-w-none"
                                src="https://cdn.pixabay.com/photo/2017/07/09/03/19/home-2486092_960_720.jpg"
                                alt="Customer profile user interface"/>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mycommercial" class="opacity-0 transition-all duration-4000 relative mt-24">
                <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:grid-flow-col-dense lg:gap-24">
                    <div class="px-4 max-w-xl mx-auto sm:px-6 lg:py-16 lg:max-w-none lg:mx-0 lg:px-0">
                        <div>
                            <!-- <div>
                              <span class="h-12 w-12 rounded-md flex items-center justify-center bg-indigo-600">
                                <InboxIcon class="h-6 w-6 text-white" aria-hidden="true" />
                              </span>
                            </div> -->
                            <div class="mt-6">
                                <h2 class="text-3xl font-extrabold tracking-tight text-gray-900">
                                    Komeční prostory
                                </h2>
                                <p class="mt-4 text-lg text-gray-500">
                                    Semper curabitur ullamcorper posuere nunc sed. Ornare iaculis bibendum malesuada
                                    faucibus lacinia porttitor. Pulvinar laoreet sagittis viverra duis. In venenatis sem
                                    arcu pretium pharetra at. Lectus viverra dui tellus ornare pharetra.
                                </p>
                                <div class="mt-6">
                                    <a href="#"
                                       class="inline-flex px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700">
                                        Pokračovat na galerii
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-12 sm:mt-16 lg:mt-0">
                        <div class="pl-4 -mr-48 sm:pl-6 md:-mr-16 lg:px-0 lg:m-0 lg:relative lg:h-full">
                            <img
                                class="w-full rounded-xl shadow-xl ring-1 ring-black ring-opacity-5 lg:absolute lg:left-0 lg:h-full lg:w-auto lg:max-w-none"
                                src="https://cdn.pixabay.com/photo/2017/07/09/03/19/home-2486092_960_720.jpg"
                                alt="Inbox user interface"/>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="contact-as">
            <div id="myform"
                 class="opacity-0 transition-all duration-4000 max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8 mt-5">
                <div class="text-center">
                    <p class="mt-1 mb-12 text-4xl font-extrabold text-gray-900 sm:text-5xl sm:tracking-tight lg:text-6xl">
                        Kontaktujte nás!</p>
                </div>
                <div class="relative bg-white shadow-xl">
                    <h2 class="sr-only">Kontaktní informace</h2>

                    <div class="grid grid-cols-1 lg:grid-cols-3">
                        <!-- Contact information :class="[form ? 'transition-opacity' : 'opacity-0', 'max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8 mt-5']-->
                        <div class="relative overflow-hidden py-10 px-6 bg-indigo-700 sm:px-10 xl:p-12">
                            <div class="absolute inset-0 pointer-events-none sm:hidden" aria-hidden="true">
                                <svg class="absolute inset-0 w-full h-full" width="343" height="388"
                                     viewBox="0 0 343 388" fill="none" preserveAspectRatio="xMidYMid slice"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M-99 461.107L608.107-246l707.103 707.107-707.103 707.103L-99 461.107z"
                                          fill="url(#linear1)" fill-opacity=".1"/>
                                    <defs>
                                        <linearGradient id="linear1" x1="254.553" y1="107.554" x2="961.66" y2="814.66"
                                                        gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#fff" offset="0"/>
                                            <stop offset="1" stop-color="#fff" stop-opacity="0"/>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <div
                                class="hidden absolute top-0 right-0 bottom-0 w-1/2 pointer-events-none sm:block lg:hidden"
                                aria-hidden="true">
                                <svg class="absolute inset-0 w-full h-full" width="359" height="339"
                                     viewBox="0 0 359 339" fill="none" preserveAspectRatio="xMidYMid slice"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M-161 382.107L546.107-325l707.103 707.107-707.103 707.103L-161 382.107z"
                                          fill="url(#linear2)" fill-opacity=".1"/>
                                    <defs>
                                        <linearGradient id="linear2" x1="192.553" y1="28.553" x2="899.66" y2="735.66"
                                                        gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#fff" offset="0"/>
                                            <stop offset="1" stop-color="#fff" stop-opacity="0"/>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <div class="hidden absolute top-0 right-0 bottom-0 w-1/2 pointer-events-none lg:block"
                                 aria-hidden="true">
                                <svg class="absolute inset-0 w-full h-full" width="160" height="678"
                                     viewBox="0 0 160 678" fill="none" preserveAspectRatio="xMidYMid slice"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M-161 679.107L546.107-28l707.103 707.107-707.103 707.103L-161 679.107z"
                                          fill="url(#linear3)" fill-opacity=".1"/>
                                    <defs>
                                        <linearGradient id="linear3" x1="192.553" y1="325.553" x2="899.66" y2="1032.66"
                                                        gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#fff" offset="0"/>
                                            <stop offset="1" stop-color="#fff" stop-opacity="0"/>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <h3 class="text-lg font-medium text-white">Kontaktní informace</h3>
                            <p class="mt-6 text-base text-indigo-50 max-w-3xl"></p>
                            <dl class="mt-8 space-y-6">
                                <dt><span class="sr-only">Adress</span></dt>
                                <dd class="flex text-base text-indigo-50">
                                    <LibraryIcon class="flex-shrink-0 w-6 h-6 text-indigo-200" aria-hidden="true"/>
                                    <span class="ml-3">Jeseník 790 00, Astur 185</span>
                                </dd>
                                <dt><span class="sr-only">Phone number</span></dt>
                                <dd class="flex text-base text-indigo-50">
                                    <PhoneIcon class="flex-shrink-0 w-6 h-6 text-indigo-200" aria-hidden="true"/>
                                    <span class="ml-3">607 238 514</span>
                                </dd>
                                <dd class="flex text-base text-indigo-50">
                                    <PhoneIcon class="flex-shrink-0 w-6 h-6 text-indigo-200" aria-hidden="true"/>
                                    <span class="ml-3">608 333 070</span>
                                </dd>
                                <dt><span class="sr-only">Email</span></dt>
                                <dd class="flex text-base text-indigo-50">
                                    <MailIcon class="flex-shrink-0 w-6 h-6 text-indigo-200" aria-hidden="true"/>
                                    <span class="ml-3">stolarstvi.adolfovice@seznam.cz</span>
                                </dd>
                            </dl>
                            <ul role="list" class="mt-8 flex space-x-12">
                                <li>
                                    <a class="text-indigo-200 hover:text-indigo-100" href="#">
                                        <span class="sr-only">Facebook</span>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                             xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" aria-hidden="true">
                                            <path
                                                d="M22.258 1H2.242C1.556 1 1 1.556 1 2.242v20.016c0 .686.556 1.242 1.242 1.242h10.776v-8.713h-2.932V11.39h2.932V8.887c0-2.906 1.775-4.489 4.367-4.489 1.242 0 2.31.093 2.62.134v3.037l-1.797.001c-1.41 0-1.683.67-1.683 1.653v2.168h3.362l-.438 3.396h-2.924V23.5h5.733c.686 0 1.242-.556 1.242-1.242V2.242C23.5 1.556 22.944 1 22.258 1"
                                                fill="currentColor"/>
                                        </svg>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <!-- Contact form -->
                        <div class="py-10 px-6 sm:px-10 lg:col-span-2 xl:p-12">
                            <form @submit.prevent="submit"
                                  class="mt-6 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8">
                                <div>
                                    <label for="first-name"
                                           class="block text-sm font-medium text-gray-900">Jméno</label>
                                    <div class="mt-1">
                                        <input v-model="form.name" type="text" name="first-name" id="first-name"
                                               autocomplete="given-name"
                                               class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('name')"
                                         v-text="form.errors.get('name')"></div>
                                </div>
                                <div>
                                    <label for="last-name"
                                           class="block text-sm font-medium text-gray-900">Příjmení</label>
                                    <div class="mt-1">
                                        <input v-model="form.surname" type="text" name="last-name" id="last-name"
                                               autocomplete="family-name"
                                               class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('surname')"
                                         v-text="form.errors.get('surname')"></div>
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-900">Email</label>
                                    <div class="mt-1">
                                        <input v-model="form.email" id="email" name="email" type="email"
                                               autocomplete="email"
                                               class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('email')"
                                         v-text="form.errors.get('email')"></div>
                                </div>
                                <div>
                                    <div class="flex justify-between">
                                        <label for="phone" class="block text-sm font-medium text-gray-900">Telefonní
                                            číslo</label>
                                    </div>
                                    <div class="mt-1">
                                        <input v-model="form.phone" type="text" name="phone" id="phone"
                                               autocomplete="tel"
                                               class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                               aria-describedby="phone-optional"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('phone')"
                                         v-text="form.errors.get('phone')"></div>
                                </div>
                                <div class="sm:col-span-2">
                                    <label for="subject" class="block text-sm font-medium text-gray-900">Předmět</label>
                                    <div class="mt-1">
                                        <input v-model="form.subject" type="text" name="subject" id="subject"
                                               class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('subject')"
                                         v-text="form.errors.get('subject')"></div>
                                </div>
                                <div class="sm:col-span-2">
                                    <div class="flex justify-between">
                                        <label for="message"
                                               class="block text-sm font-medium text-gray-900">Text</label>
                                        <span id="message-max" class="text-sm text-gray-500">Max. 500 characters</span>
                                    </div>
                                    <div class="mt-1">
                                        <textarea v-model="form.message" id="message" name="message" rows="4"
                                                  class="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border border-gray-300 rounded-md"
                                                  aria-describedby="message-max"/>
                                    </div>
                                    <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('message')"
                                         v-text="form.errors.get('message')"></div>
                                </div>
                                <input v-model="form.title" type="hidden" id="title" name="title">
                                <div class="mt-1 text-sm text-red-600" v-if="form.errors.has('exception')"
                                     v-text="form.errors.get('exception')">
                                </div>
                                <div class="sm:col-span-2 sm:flex sm:justify-end">
                                    <button type="submit"
                                            class="mt-2 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto">
                                        Odeslat
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</template>

<script>
import {reactive} from 'vue'
import {InboxIcon, SparklesIcon, MailIcon, PhoneIcon, LibraryIcon} from '@heroicons/vue/outline'
import api from '../../../services/api'
import Form from "../../../utilities/form"

export default {
    components: {
        InboxIcon,
        SparklesIcon,
        MailIcon,
        PhoneIcon,
        LibraryIcon,
    },
    setup() {
        const form = reactive(new Form({
            title: null,
            name: null,
            surname: null,
            email: null,
            phone: null,
            subject: null,
            message: null
        }))

        function submit() {
            api.contact(form.objectToFormData())
                .then(() => {
                    form.onSuccess()
                }).catch(error => {
                form.onFail(error.response.data.errors)
            })
        }

        return {
            submit,
            form,
        }
    },
    mounted() {
        function isInViewport(el) {
            var top = el.offsetTop;
            var left = el.offsetLeft;
            var width = el.offsetWidth;
            var height = el.offsetHeight;

            while (el.offsetParent) {
                el = el.offsetParent;
                top += el.offsetTop;
                left += el.offsetLeft;
            }

            return (
                top < (window.pageYOffset + window.innerHeight) &&
                left < (window.pageXOffset + window.innerWidth) &&
                (top + height) > window.pageYOffset &&
                (left + width) > window.pageXOffset
            );
        }

        // Získání elementu
        const contactForm = document.querySelector('#myform');
        const commercial = document.querySelector('#mycommercial');
        const cabinets = document.querySelector('#mycabinets');
        const kitchens = document.querySelector('#mykitchens');
        const aboutUs = document.querySelector('#about-us');
        const elemets = [contactForm, commercial, cabinets, kitchens, aboutUs];

        document.addEventListener('scroll', function () {
            for (let index = 0; index < elemets.length; ++index) {
                if (isInViewport(elemets[index])) {
                    elemets[index].classList.remove('opacity-0');
                    elemets[index].classList.add('opacity-1');
                    //elemets[index].classList.remove('scale-0');
                    //elemets[index].classList.add('scale-100');
                }
            }
        });
    }
}
</script>
